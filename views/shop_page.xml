<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!--********************************************Template que Permite Carregar a Lista dos Produtos****************************************************-->
    <template id="products_shop" inherit_id="website_sale.products">
        <xpath expr="//t[@t-call='website.layout']" position="replace">
            <t t-call="website.layout">
                <t t-set="additional_title">Loja</t>
                <div id="wrap" class="js_sale">
                    <div class="oe_structure" id="oe_structure_website_sale_products_1"/>
                    <div class="container oe_website_sale">
                        <div class="products_pager form-inline flex-md-nowrap justify-content-between justify-content-md-center">
                            <t t-call="website_sale.search">
                                <t t-set="_classes">w-100 w-md-auto mt-2</t>
                            </t>
                            <t t-call="website_sale.pricelist_list">
                                <t t-set="_classes">mt-2 ml-md-2</t>
                            </t>
                            <t t-call="website.pager">
                                <t t-set="_classes">mt-2 ml-md-2</t>
                            </t>
                        </div>
                        <div class="row o_wsale_products_main_row">
                            <div t-if="enable_left_column" id="products_grid_before" class="col-lg-3"/>
                            <div id="products_grid"
                                 t-attf-class="col #{'o_wsale_layout_list' if layout_mode == 'list' else ''}">
                                <t t-if="category">
                                    <t t-set="editor_msg">Drag building blocks here to customize the header for "<t
                                            t-esc="category.name"/>" category.
                                    </t>
                                    <div class="mb16" id="category_header" t-att-data-editor-message="editor_msg"
                                         t-field="category.website_description"/>
                                </t>
                                <div t-if="bins" class="o_wsale_products_grid_table_wrapper">
                                    <table class="table table-borderless m-0" t-att-data-ppg="ppg"
                                           t-att-data-ppr="ppr">
                                        <colgroup t-ignore="true">
                                            <!-- Force the number of columns (useful when only one row of (x < ppr) products) -->
                                            <col t-foreach="ppr" t-as="p"/>
                                        </colgroup>
                                        <tbody>
                                            <tr t-foreach="bins" t-as="tr_product">
                                                <t t-foreach="tr_product" t-as="td_product">
                                                    <t t-if="td_product">
                                                        <t t-set="product" t-value="td_product['product']"/>
                                                        <td t-att-colspan="td_product['x'] != 1 and td_product['x']"
                                                            t-att-rowspan="td_product['y'] != 1 and td_product['y']"
                                                            t-attf-class="oe_product #{td_product['class']}">
                                                            <div t-attf-class="o_wsale_product_grid_wrapper o_wsale_product_grid_wrapper_#{td_product['x']}_#{td_product['y']}">
                                                                <t t-call="website_sale.products_item">
                                                                    <t t-set="product_image_big"
                                                                       t-value="td_product['x'] + td_product['y'] &gt; 2"/>
                                                                </t>
                                                            </div>
                                                        </td>
                                                    </t>
                                                    <td t-else=""/>
                                                </t>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <t t-else="">
                                    <div class="text-center text-muted">
                                        <t t-if="not search">
                                            <h3 class="mt8">Sem produtos cadastrados</h3>
                                            <p t-if="category">Sem categoria de produtos cadastrados<strong
                                                    t-esc="category.display_name"/>".
                                            </p>
                                        </t>
                                        <t t-else="">
                                            <h3 class="mt8">Nenhum resultado</h3>
                                            <p>Sem resultados para "<strong t-esc="search"/>"
                                                <t t-if="category">na categoria "<strong
                                                        t-esc="category.display_name"/>"
                                                </t>
                                                .
                                            </p>
                                        </t>
                                        <p t-ignore="true" groups="sales_team.group_sale_manager">Clique em
                                            <i>'Novo'</i>
                                            no botão a direita no top para cadastrar seu primeiro produto
                                        </p>
                                    </div>
                                </t>
                            </div>
                        </div>
                        <div class="products_pager form-inline justify-content-center mt-3">
                            <t t-call="website.pager"/>
                        </div>
                    </div>
                    <div class="oe_structure mb32" id="oe_structure_website_sale_products_2"/>
                </div>
            </t>
        </xpath>
    </template>


    <template id="sort" inherit_id="website_sale.products" customize_show="True" name="Mostrado por">
        <xpath expr="//div[hasclass('products_pager')]/t[@t-call][last()]" position="after">
            <t t-set="list_price_desc_label">Catálogo de preço: mais caro ao mais barato</t>
            <t t-set="list_price_asc_label">Catálogo de preço: mais barato ao mais caro</t>
            <t t-set="name_asc_label">Nome: A a Z</t>
            <t t-set="name_desc_label">Nome: Z a A</t>
            <t t-set="website_sale_sortable"
               t-value="[                 (list_price_desc_label, 'list_price desc'),                 (list_price_asc_label, 'list_price asc'),                 (name_asc_label, 'name asc'),                 (name_desc_label, 'name desc')             ]"/>
            <t t-set="website_sale_sortable_current"
               t-value="[sort for sort in website_sale_sortable if sort[1]==request.params.get('order', '')]"/>
            <div class="dropdown mt-2 ml-md-2 dropdown_sorty_by">
                <a role="button" href="#" class="dropdown-toggle btn btn-secondary" data-toggle="dropdown">
                    <span class="d-none d-lg-inline">
                        <t t-if="len(website_sale_sortable_current)">
                            Ordenar por :
                            <t t-raw="website_sale_sortable_current[0][0]"/>
                        </t>
                        <t t-else="1">
                            odernar pelo
                        </t>
                    </span>
                    <i class="fa fa-sort-amount-asc d-lg-none"/>
                </a>
                <div class="dropdown-menu dropdown-menu-right" role="menu">
                    <t t-foreach="website_sale_sortable" t-as="sortby">
                        <a role="menuitem" rel="noindex,nofollow" t-att-href="keep('/shop', order=sortby[1])"
                           class="dropdown-item">
                            <span t-raw="sortby[0]"/>
                        </a>
                    </t>
                </div>
            </div>
        </xpath>
    </template>

    <!-- Shopping Cart-->
    <template id="shopping_cart" inherit_id="website_sale.cart" name="Carrinho da Loja">
        <xpath expr="//t[@t-call='website.layout']" position="replace">
            <t t-call="website.layout">
                <div id="wrap">
                    <div class="container oe_website_sale py-2">
                        <div class="row">
                            <div class="col-12">
                                <t t-call="website_sale.wizard_checkout">
                                    <t t-set="step" t-value="10"/>
                                </t>
                            </div>
                            <div class="col-12 col-xl-8 oe_cart">
                                <div class="row">
                                    <div class="col-lg-12">
                                        <div t-if="abandoned_proceed or access_token" class="mt8 mb8 alert alert-info"
                                             role="alert"> <!-- abandoned cart choices -->
                                            <t t-if="abandoned_proceed">
                                                <p>seu carrinho anterior já foi concluído.</p>
                                                <p t-if="website_sale_order">Continue com o seu carrinho actual.</p>
                                            </t>
                                            <t t-if="access_token">
                                                <p>Este é o seu carrinho actual.</p>
                                                <p>
                                                    <strong>
                                                        <a t-attf-href="/shop/cart/?access_token=#{access_token}&amp;revive=squash">
                                                            Clique aqui
                                                        </a>
                                                    </strong>
                                                    se você deseja restaurar seu carrinho anterior. Seu carrinho atual
                                                    será substituído pelo carrinho anterior.
                                                </p>
                                                <p>
                                                    <strong>
                                                        <a t-attf-href="/shop/cart/?access_token=#{access_token}&amp;revive=merge">
                                                            Clique aqui
                                                        </a>
                                                    </strong>
                                                    se você deseja mesclar seu carrinho anterior no carrinho atual.
                                                </p>
                                            </t>
                                        </div>
                                        <t t-call="website_sale.cart_lines"/>
                                        <div class="clearfix"/>
                                        <a role="button" href="/shop"
                                           class="btn btn-secondary mb32 d-none d-xl-inline-block">
                                            <span class="fa fa-chevron-left"/>
                                            <span class="">Continue comprando</span>
                                        </a>
                                        <a role="button"
                                           t-if="website_sale_order and website_sale_order.website_order_line"
                                           class="btn btn-primary float-right d-none d-xl-inline-block"
                                           href="/shop/checkout?express=1">
                                            <span class="">Finalizar Compra</span>
                                            <span class="fa fa-chevron-right"/>
                                        </a>
                                        <div class="oe_structure" id="oe_structure_website_sale_cart_1"/>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 col-xl-4" id="o_cart_summary">
                                <t t-call="website_sale.short_cart_summary"/>
                                <div class="d-xl-none mt8">
                                    <a role="button" href="/shop" class="btn btn-secondary mb32">
                                        <span class="fa fa-chevron-left"/>
                                        Continue
                                        <span class="d-none d-md-inline">Comprando</span>
                                    </a>
                                    <a role="button" t-if="website_sale_order and website_sale_order.website_order_line"
                                       class="btn btn-primary float-right" href="/shop/checkout?express=1">
                                        <span class="">Finalizar compra</span>
                                        <span class="fa fa-chevron-right"/>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="oe_structure" id="oe_structure_website_sale_cart_2"/>
                </div>
            </t>

        </xpath>
    </template>

    <!-- Shopping Cart Lines-->
    <template id="shopping_cart_lines" inherit_id="website_sale.cart_lines" name="Linhas do carrinho da loja">
        <xpath expr="//table[@id='cart_products']" position="replace">
            <div t-if="not website_sale_order or not website_sale_order.website_order_line"
                 class="js_cart_lines alert alert-info">
                Seu carrinho está vazio!
            </div>
            <table class="mb16 table table-striped table-sm js_cart_lines" id="cart_products"
                   t-if="website_sale_order and website_sale_order.website_order_line">
                <thead>
                    <tr>
                        <th class="td-img">Productos</th>
                        <th/>
                        <th class="text-center td-qty">Quantidade</th>
                        <th class="text-center td-price">Preço</th>
                        <th class="text-center td-action"/>
                    </tr>
                </thead>
                <tbody>
                    <t t-foreach="website_sale_order.website_order_line" t-as="line">
                        <tr t-att-class="'optional_product info' if line.linked_line_id else None">
                            <td colspan="2" t-if="not line.product_id.product_tmpl_id" class="td-img"/>
                            <td align="center" t-if="line.product_id.product_tmpl_id" class="td-img">
                                <span t-field="line.product_id.image_128"
                                      t-options="{'widget': 'image', 'qweb_img_responsive': False, 'class': 'rounded o_image_64_max'}"/>
                            </td>
                            <td t-if="line.product_id.product_tmpl_id" class="td-product_name">
                                <div>
                                    <t t-call="website_sale.cart_line_product_link">
                                        <strong t-field="line.name_short"/>
                                    </t>
                                </div>
                                <t t-call="website_sale.cart_line_description_following_lines">
                                    <t t-set="div_class" t-value="'d-none d-md-block'"/>
                                </t>
                            </td>
                            <td class="text-center td-qty">
                                <div class="css_quantity input-group mx-auto">
                                    <div class="input-group-prepend">
                                        <a t-attf-href="#"
                                           class="btn btn-link js_add_cart_json d-none d-md-inline-block"
                                           aria-label="Remove one" title="Remove one">
                                            <i class="fa fa-minus"/>
                                        </a>
                                    </div>
                                    <input type="text" class="js_quantity form-control quantity"
                                           t-att-data-line-id="line.id" t-att-data-product-id="line.product_id.id"
                                           t-att-value="int(line.product_uom_qty) == line.product_uom_qty and int(line.product_uom_qty) or line.product_uom_qty"/>
                                    <div class="input-group-append">
                                        <a t-attf-href="#"
                                           class="btn btn-link float_left js_add_cart_json d-none d-md-inline-block"
                                           aria-label="Add one" title="Add one">
                                            <i class="fa fa-plus"/>
                                        </a>
                                    </div>
                                </div>
                            </td>
                            <td class="text-center td-price" name="price">
                                <t t-set="combination"
                                   t-value="line.product_id.product_template_attribute_value_ids + line.product_no_variant_attribute_value_ids"/>
                                <t t-set="combination_info"
                                   t-value="line.product_id.product_tmpl_id._get_combination_info(combination)"/>

                                <t t-set="list_price_converted"
                                   t-value="website.currency_id._convert(combination_info['list_price'], website_sale_order.currency_id, website_sale_order.company_id, date)"/>
                                <t groups="account.group_show_line_subtotals_tax_excluded"
                                   t-if="(website_sale_order.pricelist_id.discount_policy == 'without_discount' and website_sale_order.currency_id.compare_amounts(list_price_converted, line.price_reduce_taxexcl) == 1) or website_sale_order.currency_id.compare_amounts(line.price_unit, line.price_reduce) == 1"
                                   name="order_line_discount">
                                    <del t-attf-class="#{'text-danger mr8'}" style="white-space: nowrap;"
                                         t-esc="list_price_converted"
                                         t-options="{'widget': 'monetary', 'display_currency': website_sale_order.currency_id}"/>
                                </t>
                                <span t-field="line.price_reduce_taxexcl" style="white-space: nowrap;"
                                      t-options="{'widget': 'monetary', 'display_currency': website_sale_order.currency_id}"
                                      groups="account.group_show_line_subtotals_tax_excluded"/>
                                <t groups="account.group_show_line_subtotals_tax_included"
                                   t-if="(website_sale_order.pricelist_id.discount_policy == 'without_discount' and website_sale_order.currency_id.compare_amounts(list_price_converted, line.price_reduce_taxinc) == 1) or website_sale_order.currency_id.compare_amounts(line.price_unit, line.price_reduce) == 1"
                                   name="order_line_discount">
                                    <del t-attf-class="#{'text-danger mr8'}" style="white-space: nowrap;"
                                         t-esc="list_price_converted"
                                         t-options="{'widget': 'monetary', 'display_currency': website_sale_order.currency_id}"/>
                                </t>
                                <span t-field="line.price_reduce_taxinc" style="white-space: nowrap;"
                                      t-options="{'widget': 'monetary', 'display_currency': website_sale_order.currency_id}"
                                      groups="account.group_show_line_subtotals_tax_included"/>
                            </td>
                            <td class="td-action">
                                <a href="#" aria-label="Remove from cart" title="Remove from cart"
                                   class="js_delete_product no-decoration">
                                    <small>
                                        <i class="fa fa-trash-o"/>
                                    </small>
                                </a>
                            </td>
                        </tr>
                    </t>
                </tbody>
            </table>

        </xpath>
    </template>

    <!-- Wizard Checkout-->
    <template id="shopping_wizard_checkout" inherit_id="website_sale.wizard_checkout"
              name="Lina do processo de compra na loja">
        <xpath expr="//div[@class='row']" position="replace">
            <div class="row">
                <div class="col-xl">
                    <div class="wizard">
                        <div class="progress-wizard">
                            <a class="no-decoration" t-att-href="step&gt;=10 and '/shop/cart' or '#'">
                                <div id="wizard-step10"
                                     t-att-class="'progress-wizard-step %s' % (step == 10 and 'active' or step&gt;10 and 'complete' or 'disabled')">
                                    <div class="progress-wizard-bar d-none d-md-block"/>
                                    <span class="progress-wizard-dot d-none d-md-inline-block"/>
                                    <div class="text-center progress-wizard-steplabel">Rever pedido</div>
                                </div>
                            </a>
                            <a class="no-decoration" t-att-href="step&gt;=20 and '/shop/checkout' or '#'">
                                <div id="wizard-step20"
                                     t-att-class="'progress-wizard-step %s' % (step == 20 and 'active' or step&gt;20 and 'complete' or 'disabled')">
                                    <div class="progress-wizard-bar d-none d-md-block"/>
                                    <span class="progress-wizard-dot d-none d-md-inline-block"/>
                                    <div class="text-center progress-wizard-steplabel">Endereço</div>
                                </div>
                            </a>
                            <a class="no-decoration" t-att-href="step&gt;=40 and '/shop/payment' or '#'">
                                <div id="wizard-step40"
                                     t-att-class="'progress-wizard-step %s' % (step == 40 and 'active' or step&gt;40 and 'complete' or 'disabled')">
                                    <div class="progress-wizard-bar d-none d-md-block"/>
                                    <span class="progress-wizard-dot d-none d-md-inline-block"/>
                                    <div class="text-center progress-wizard-steplabel">Confirmar Pedido</div>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

        </xpath>
    </template>

    <!-- Short Cart right column-->
    <template id="short_cart_summary" inherit_id="website_sale.short_cart_summary"
              name="Coluna do Total de pedidos">
        <xpath expr="//div[@class='card-body']" position="replace">
            <div class="card-body">
                <h4 class="d-none d-xl-block">Total do pedido</h4>
                <hr class="d-none d-xl-block"/>
                <div>
                    <t t-call="website_sale.total">
                        <t t-set="no_rowspan">1</t>
                    </t>
                    <a role="button" t-if="website_sale_order and website_sale_order.website_order_line"
                       class="btn btn-secondary float-right d-none d-xl-inline-block"
                       href="/shop/checkout?express=1">
                        <span>Finalizar a compra</span>
                    </a>
                </div>
            </div>
        </xpath>
    </template>

    <!-- Shopping Total-->
    <template id="shopping_total" inherit_id="website_sale.total"
              name="Total de pedidos">
        <xpath expr="//div[@id='cart_total']" position="replace">

            <div id="cart_total" t-att-class="extra_class or ''"
                 t-if="website_sale_order and website_sale_order.website_order_line">
                <table class="table">
                    <tr id="empty">
                        <t t-if="not no_rowspan">
                            <td rowspan="10" class="border-0"/>
                        </t>
                        <td class="col-md-2 col-3 border-0"/>
                        <td class="col-md-2 col-3 border-0"/>
                    </tr>
                    <tr id="order_total_untaxed">
                        <td class="text-right border-0">Subtotal:</td>
                        <td class="text-xl-right border-0">
                            <span t-field="website_sale_order.amount_untaxed" class="monetary_field"
                                  style="white-space: nowrap;"
                                  t-options="{'widget': 'monetary', 'display_currency': website_sale_order.currency_id}"/>
                        </td>
                    </tr>
                    <tr id="order_total_taxes">
                        <td class="text-right border-0">Impostos:</td>
                        <td class="text-xl-right border-0">
                            <span t-field="website_sale_order.amount_tax" class="monetary_field"
                                  style="white-space: nowrap;"
                                  t-options="{'widget': 'monetary', 'display_currency': website_sale_order.currency_id}"/>
                        </td>
                    </tr>
                    <tr id="order_total">
                        <td class="text-right">
                            <strong>Total:</strong>
                        </td>
                        <td class="text-xl-right">
                            <strong t-field="website_sale_order.amount_total" class="monetary_field"
                                    t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: website_sale_order.pricelist_id.currency_id}"/>
                        </td>
                    </tr>
                </table>
            </div>
        </xpath>
    </template>

    <!--    Descrição do producto-->
    <template id="product_description" inherit_id="website_sale.product" name="Product description">
        <xpath expr="//t[@t-call='website.layout']" position="replace">
            <t t-call="website.layout">
                <t t-set="additional_title" t-value="product.name"/>
                <div itemscope="itemscope" itemtype="'http://schema.org/Product'" id="wrap" class="js_sale">
                    <section
                            t-attf-class="container py-2 oe_website_sale #{'discount' if combination_info['has_discounted_price'] else ''}"
                            id="product_detail" t-att-data-view-track="view_track and '1' or '0'">
                        <div class="row">
                            <div class="col-md-4">
                                <ol class="breadcrumb">
                                    <li class="breadcrumb-item">
                                        <a t-att-href="keep(category=0)">Productos</a>
                                    </li>
                                    <li t-if="category" class="breadcrumb-item">
                                        <a t-att-href="keep('/shop/category/%s' % slug(category), category=0)"
                                           t-field="category.name"/>
                                    </li>
                                    <li class="breadcrumb-item active">
                                        <span t-field="product.name"/>
                                    </li>
                                </ol>
                            </div>
                            <div class="col-md-8">
                                <div class="form-inline justify-content-end">
                                    <t t-call="website_sale.search">
                                        <t t-set="search" t-value="False"/>
                                    </t>
                                    <t t-call="website_sale.pricelist_list">
                                        <t t-set="_classes">ml-2</t>
                                    </t>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 col-xl-8">
                                <t t-call="website_sale.shop_product_carousel"/>
                            </div>
                            <div class="col-md-6 col-xl-4" id="product_details">
                                <h1 itemprop="name" t-field="product.name">Nome do producto</h1>
                                <span itemprop="url" style="display:none;" t-esc="product.website_url"/>
                                <form t-if="product._is_add_to_cart_possible()" action="/shop/cart/update"
                                      method="POST">
                                    <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                                    <div class="js_product js_main_product">
                                        <t t-placeholder="select">
                                            <input type="hidden" class="product_id" name="product_id"
                                                   t-att-value="product_variant.id"/>
                                            <input type="hidden" class="product_template_id"
                                                   name="product_template_id" t-att-value="product.id"/>
                                            <t t-if="combination" t-call="sale.variants">
                                                <t t-set="ul_class" t-value="'flex-column'"/>
                                                <t t-set="parent_combination" t-value="None"/>
                                            </t>
                                            <t t-else="">
                                                <ul class="d-none js_add_cart_variants"
                                                    t-att-data-attribute_exclusions="{'exclusions: []'}"/>
                                            </t>
                                        </t>
                                        <t t-call="website_sale.product_price"/>
                                        <p t-if="True" class="css_not_available_msg alert alert-warning">Essa combinação
                                            não existe
                                        </p>
                                        <a role="button" id="add_to_cart"
                                           class="btn btn-primary btn-lg mt16 js_check_product a-submit d-block d-sm-inline-block"
                                           href="#">
                                            <i class="fa fa-shopping-cart"/>
                                            Adicionar ao carrinho
                                        </a>
                                        <div id="product_option_block"/>
                                    </div>
                                </form>
                                <p t-elif="not product.active" class="alert alert-warning">Este producto não está
                                    disponível
                                </p>
                                <p t-else="" class="alert alert-warning">Este não tem uma combinação válida</p>
                                <hr t-if="product.description_sale"/>
                                <div>
                                    <p t-field="product.description_sale" class="text-muted mt-3"
                                       placeholder="A short description that will also appear on documents."/>
                                    <div id="product_attributes_simple">
                                        <hr t-if="sum([(1 if len(l.value_ids)==1 else 0) for l in product.attribute_line_ids])"/>
                                        <p class="text-muted">
                                            <t t-set="single_value_attributes"
                                               t-value="product.valid_product_template_attribute_line_ids._prepare_single_value_for_display()"/>
                                            <t t-foreach="single_value_attributes" t-as="attribute">
                                                <span t-field="attribute.name"/>:
                                                <t t-foreach="single_value_attributes[attribute]" t-as="ptal">
                                                    <span t-field="ptal.product_template_value_ids._only_active().name"/>
                                                    <t t-if="not ptal_last">,</t>
                                                </t>
                                                <br/>
                                            </t>
                                        </p>
                                    </div>
                                </div>
                                <hr/>
                                <p class="text-muted">
                                    30-dia de garantia
                                    <br/>
                                    Venda livre em Angola
                                    <br/>
                                    pague agora, e adiquira em 2 dias
                                </p>
                            </div>
                        </div>
                    </section>
                    <div itemprop="description" t-field="product.website_description" class="oe_structure mt16"
                         id="product_full_description"/>
                </div>
            </t>


        </xpath>
    </template>


    <!-- Address Management -->
    <template id="address_management" inherit_id="website_sale.address"
              name="Endereço de entrega do pedido">
        <xpath expr="//t[@t-call='website.layout']" position="replace">
            <t t-call="website.layout">
                <div id="wrap">
                    <div class="container oe_website_sale py-2">
                        <div class="row">
                            <div class="col-12">
                                <t t-call="website_sale.wizard_checkout">
                                    <t t-set="step" t-value="20"/>
                                </t>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12 col-xl-auto order-xl-2 d-none d-xl-block">
                                <t t-call="website_sale.cart_summary">
                                    <t t-set="hide_coupon">True</t>
                                    <t t-set="redirect" t-valuef="/shop/address"/>
                                </t>
                            </div>
                            <div class="col-12 col-xl order-xl-1 oe_cart">
                                <div>
                                    <t t-if="mode == ('new', 'billing')">
                                        <h2 class="o_page_header mt8">Seu endereço
                                            <small>or</small>
                                            <a role="button" href="/web/login?redirect=/shop/checkout"
                                               class="btn btn-primary" style="margin-top: -11px">Log In
                                            </a>
                                        </h2>
                                    </t>
                                    <t t-if="mode == ('edit', 'billing')">
                                        <h2 class="o_page_header mt8">Seu endereço</h2>
                                    </t>
                                    <t t-if="mode[1] == 'shipping'">
                                        <h2 class="o_page_header mt8">Endereço da loja</h2>
                                    </t>
                                    <t t-if="partner_id == website_sale_order.partner_shipping_id.id == website_sale_order.partner_invoice_id.id">
                                        <div class="alert alert-warning" role="alert">
                                            <h4 class="alert-heading">Esteja ciente</h4>
                                            <p t-if="not only_services" groups="sale.group_delivery_invoice_address">
                                                Está editando seu endereço de<b>faturamento e de loja</b> no mesmo
                                                instante!
                                                <br/>
                                                Se quiser modifiicar seu endereço de loja, crie um <a
                                                    href="/shop/address">novo endereço</a>.
                                            </p>
                                        </div>
                                    </t>
                                    <t t-if="error" t-foreach="error.get('error_message', [])" t-as="err">
                                        <h4 class="text-danger" t-esc="err"/>
                                    </t>
                                    <form action="/shop/address" method="post" class="checkout_autoformat">
                                        <div class="form-row">
                                            <div t-attf-class="form-group #{error.get('name') and 'o_has_error' or ''} col-lg-12 div_name">
                                                <label class="col-form-label" for="name">Nome completo</label>
                                                <input type="text" name="name"
                                                       t-attf-class="form-control #{error.get('name') and 'is-invalid' or ''}"
                                                       t-att-value="'name' in checkout and checkout['name']"/>
                                            </div>
                                            <div class="w-100"/>
                                            <t t-if="mode[1] == 'billing'">
                                                <div t-attf-class="form-group #{error.get('email') and 'o_has_error' or ''} col-lg-6"
                                                     id="div_email">
                                                    <label class="col-form-label" for="email">Email</label>
                                                    <input type="email" name="email"
                                                           t-attf-class="form-control #{error.get('email') and 'is-invalid' or ''}"
                                                           t-att-value="'email' in checkout and checkout['email']"/>
                                                </div>
                                            </t>
                                            <div t-attf-class="form-group #{error.get('phone') and 'o_has_error' or ''} col-lg-6"
                                                 id="div_phone">
                                                <label class="col-form-label" for="phone">Telemóvel</label>
                                                <input type="tel" name="phone"
                                                       t-attf-class="form-control #{error.get('phone') and 'is-invalid' or ''}"
                                                       t-att-value="'phone' in checkout and checkout['phone']"/>
                                            </div>
                                            <div class="w-100"/>
                                            <div t-attf-class="form-group #{error.get('street') and 'o_has_error' or ''} col-lg-12 div_street">
                                                <label class="col-form-label" for="street">Rua
                                                </label>
                                                <input type="text" name="street"
                                                       t-attf-class="form-control #{error.get('street') and 'is-invalid' or ''}"
                                                       t-att-value="'street' in checkout and checkout['street']"/>
                                            </div>
                                            <div t-attf-class="form-group #{error.get('city') and 'o_has_error' or ''} col-md-12 div_city">
                                                <label class="col-form-label" for="city">Cidade</label>
                                                <input type="text" name="city"
                                                       t-attf-class="form-control #{error.get('city') and 'is-invalid' or ''}"
                                                       t-att-value="'city' in checkout and checkout['city']"/>
                                            </div>
                                            <div class="w-100"/>
                                            <t t-set="zip_city"
                                               t-value="country and [x for x in country.get_address_fields() if x in [&quot;zip&quot;, &quot;city&quot;]] or [&quot;city&quot;, &quot;zip&quot;]"/>
                                            <t t-if="'zip' in zip_city and zip_city.index('zip') &lt; zip_city.index('city')">
                                                <div t-attf-class="form-group #{error.get('zip') and 'o_has_error' or ''} col-md-4 div_zip">
                                                    <!--                                                    <label class="col-form-label label-optional" for="zip">Código postal-->
                                                    <!--                                                    </label>-->
                                                    <input type="text" name="zip"
                                                           t-attf-class="form-control #{error.get('zip') and 'is-invalid' or ''}"
                                                           t-att-value="'zip' in checkout and checkout['zip']"/>
                                                </div>
                                            </t>

                                            <t t-if="'zip' in zip_city and zip_city.index('zip') &gt; zip_city.index('city')">
                                                <div t-attf-class="form-group #{error.get('zip') and 'o_has_error' or ''} col-md-4 div_zip">
                                                    <!--                                                    <label class="col-form-label label-optional" for="zip">Código postal-->
                                                    <!--                                                    </label>-->
                                                    <input hidden="" type="text" name="zip"
                                                           t-attf-class="form-control #{error.get('zip') and 'is-invalid' or ''}"
                                                           t-att-value="'zip' in checkout and checkout['zip']"/>
                                                </div>
                                            </t>
                                            <div class="w-100"/>
                                            <div t-attf-class=" form-group #{error.get('country_id') and 'o_has_error' or ''} col-lg-6 div_country">
                                                <!--                                                <label class="col-form-label" for="country_id">País</label>-->
                                                <select hidden="" id="country_id" name="country_id"
                                                        t-attf-class="form-control #{error.get('country_id') and 'is-invalid' or ''}">
                                                    <t t-foreach="countries" t-as="c">
                                                        <t t-if="c.id == 8 ">
                                                            <option t-att-value="c.id"
                                                                    t-att-selected="c.id == (country and country.id or -1)">
                                                                <t t-esc="c.name"/>
                                                            </option>
                                                        </t>
                                                    </t>
                                                </select>
                                            </div>
                                            <div t-attf-class="form-group #{error.get('state_id') and 'o_has_error' or ''} col-lg-6 div_state"
                                                 t-att-style="(not country or not country.state_ids) and 'display: none'">
                                                <label class="col-form-label" for="state_id">Provincia</label>
                                                <select name="state_id"
                                                        t-attf-class="form-control #{error.get('state_id') and 'is-invalid' or ''}"
                                                        data-init="1">
                                                    <option value="">Provincia</option>
                                                    <t t-foreach="country and country.state_ids or []" t-as="s">
                                                        <option t-att-value="s.id"
                                                                t-att-selected="s.id == ('state_id' in checkout and country and checkout['state_id'] != '' and int(checkout['state_id']))">
                                                            <t t-esc="s.name"/>
                                                        </option>
                                                    </t>
                                                </select>
                                            </div>
                                            <div class="w-100"/>
                                            <t t-if="mode == ('new', 'billing') and not only_services">
                                                <div class="col-lg-12">
                                                    <div class="checkbox">
                                                        <label>
                                                            <input type="checkbox" id="shipping_use_same" class="mr8"
                                                                   name="use_same" value="1" checked="checked"/>Enviar
                                                            para o mesmo endereço
                                                            <span class="ship_to_other text-muted"
                                                                  style="display: none">&amp;nbsp;(
                                                                <i>Seu endereço de entrega será solicitado mais tarde)
                                                                </i>
                                                            </span>
                                                        </label>
                                                    </div>
                                                </div>
                                            </t>
                                        </div>

                                        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                                        <input type="hidden" name="submitted" value="1"/>
                                        <input type="hidden" name="partner_id" t-att-value="partner_id or '0'"/>
                                        <input type="hidden" name="callback" t-att-value="callback"/>
                                        <!-- Example -->
                                        <input type="hidden" name="field_required" t-att-value="'phone,name'"/>

                                        <div class="d-flex justify-content-between">
                                            <a role="button"
                                               t-att-href="mode == ('new', 'billing') and '/shop/cart' or '/shop/checkout'"
                                               class="btn btn-secondary mb32">
                                                <i class="fa fa-chevron-left"/>
                                                <span>Voltar</span>
                                            </a>
                                            <a role="button" href="#"
                                               class="btn btn-primary mb32 a-submit a-submit-disable a-submit-loading">
                                                <span>Próximo</span>
                                                <i class="fa fa-chevron-right"/>
                                            </a>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </t>


        </xpath>
    </template>


    <!-- Cart right column in address-->
    <template id="cart_summary" inherit_id="website_sale.cart_summary"
              name="Loja sumario">
        <xpath expr="//div[@class='card']" position="replace">
            <div class="card">
                <div class="card-body p-xl-0">
                    <div class="toggle_summary d-xl-none">
                        <b>Seu pedido:</b>
                        <span t-field="website_sale_order.amount_total"
                              t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: website_sale_order.pricelist_id.currency_id}"/>
                        <span class="fa fa-chevron-down fa-border float-right" role="img" aria-label="Details"
                              title="Details"/>
                    </div>
                    <div t-if="not website_sale_order or not website_sale_order.website_order_line"
                         class="alert alert-info">
                        Seu carrinho está vazio!
                    </div>
                    <div class="toggle_summary_div d-none d-xl-block">
                        <table class="table table-striped table-sm" id="cart_products"
                               t-if="website_sale_order and website_sale_order.website_order_line">
                            <thead>
                                <tr>
                                    <th class="border-top-0 td-img">Produtos</th>
                                    <th class="border-top-0"/>
                                    <th class="border-top-0 td-qty">Quantidade</th>
                                    <th class="border-top-0 text-center td-price">Preço</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr t-foreach="website_sale_order.website_order_line" t-as="line">
                                    <td class="" colspan="2" t-if="not line.product_id.product_tmpl_id"/>
                                    <td class="td-img text-center" t-if="line.product_id.product_tmpl_id">
                                        <span t-field="line.product_id.image_128"
                                              t-options="{'widget': 'image', 'qweb_img_responsive': False, 'class': 'rounded o_image_64_max'}"/>
                                    </td>
                                    <td class="td-product_name" t-if="line.product_id.product_tmpl_id">
                                        <div>
                                            <strong t-field="line.name_short"/>
                                        </div>
                                    </td>
                                    <td class="td-qty">
                                        <div t-esc="line.product_uom_qty"/>
                                    </td>
                                    <td class="text-center td-price">
                                        <span t-field="line.price_reduce_taxexcl" style="white-space: nowrap;"
                                              t-options="{'widget': 'monetary', 'display_currency': website_sale_order.currency_id}"
                                              groups="account.group_show_line_subtotals_tax_excluded"/>
                                        <span t-field="line.price_reduce_taxinc" style="white-space: nowrap;"
                                              t-options="{'widget': 'monetary', 'display_currency': website_sale_order.currency_id}"
                                              groups="account.group_show_line_subtotals_tax_included"/>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <t t-call="website_sale.total">
                            <t t-set="redirect" t-value="redirect or '/shop/payment'"/>
                        </t>
                    </div>
                </div>
            </div>


        </xpath>
    </template>

    <!--Shop - Checkout-->
    <template id="checkout_shop" inherit_id="website_sale.checkout"
              name="Checkout Loja">
        <xpath expr="//t[@t-call='website.layout']" position="replace">
            <t t-call="website.layout">
                <t t-set="additional_title">Loja - Finalizar</t>
                <t t-set="no_footer">1</t>
                <div id="wrap">
                    <div class="container oe_website_sale py-2">
                        <t t-set="same_shipping"
                           t-value="bool(order.partner_shipping_id==order.partner_id or only_services)"/>
                        <div class="row">
                            <div class="col-12">
                                <t t-call="website_sale.wizard_checkout">
                                    <t t-set="step" t-value="20"/>
                                </t>
                            </div>
                            <div class="col-12 col-xl-auto order-xl-2 d-none d-xl-block">
                                <t t-call="website_sale.cart_summary">
                                    <t t-set="redirect" t-valuef="/shop/checkout"/>
                                </t>
                            </div>
                            <div class="col-12 col-xl order-xl-1 oe_cart">
                                <div class="row">
                                    <div class="col-lg-12">
                                        <h3 class="o_page_header mt8">Endereço de facturamento</h3>
                                    </div>
                                    <div class="col-lg-6 one_kanban">
                                        <t t-call="website_sale.address_kanban">
                                            <t t-set="contact" t-value="order.partner_id"/>
                                            <t t-set="selected" t-value="1"/>
                                            <t t-set="readonly" t-value="1"/>
                                        </t>
                                    </div>
                                </div>
                                <t t-if="not only_services" groups="sale.group_delivery_invoice_address">
                                    <div class="row">
                                        <div class="col-lg-12">
                                            <h3 class="o_page_header mt16 mb4">Endereço de entrega</h3>
                                        </div>
                                    </div>
                                    <div class="row all_shipping">
                                        <div class="col-lg-12">
                                            <div class="row mt8">
                                                <div class="col-md-12 col-lg-12 one_kanban">
                                                    <form action="/shop/address" method="post" class="">
                                                        <input type="hidden" name="csrf_token"
                                                               t-att-value="request.csrf_token()"/>
                                                        <a role="button" href="#"
                                                           class="a-submit btn btn-secondary mb16 btn-block">
                                                            <i class="fa fa-plus-square"/>
                                                            <span>cadastre um endereço</span>
                                                        </a>
                                                    </form>
                                                </div>
                                                <t t-foreach="shippings" t-as="ship">
                                                    <div class="col-md-12 col-lg-6 one_kanban">
                                                        <t t-call="website_sale.address_kanban">
                                                            <t t-set="actual_partner" t-value="order.partner_id"/>
                                                            <t t-set="contact" t-value="ship"/>
                                                            <t t-set="selected"
                                                               t-value="order.partner_shipping_id==ship"/>
                                                            <t t-set="readonly" t-value="bool(len(shippings)==1)"/>
                                                            <t t-set="edit_billing"
                                                               t-value="bool(ship==order.partner_id)"/>
                                                        </t>
                                                    </div>
                                                </t>
                                            </div>
                                        </div>
                                    </div>
                                </t>
                                <div class="d-flex justify-content-between mt-3">
                                    <a role="button" href="/shop/cart" class="btn btn-secondary mb32">
                                        <i class="fa fa-chevron-left"/>
                                        <span>Voltar ao carrinho</span>
                                    </a>
                                    <a role="button" href="/shop/confirm_order" class="btn btn-primary mb32">
                                        <span>Confirmar</span>
                                        <i class="fa fa-chevron-right"/>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </t>


        </xpath>
    </template>

    <!--Shop - Payment-->
    <template id="Payment_shop" inherit_id="website_sale.payment"
              name="Payment Loja">
        <xpath expr="//t[@t-call='website.layout']" position="replace">
            <t t-call="website.layout">
                <t t-set="additional_title">Loja - Selecione o metodo de pagamento</t>
                <t t-set="no_footer">1</t>

                <div id="wrap">
                    <div class="container oe_website_sale py-2">
                        <div class="row">
                            <div class="col-12">
                                <t t-call="website_sale.wizard_checkout">
                                    <t t-set="step" t-value="40"/>
                                </t>
                            </div>
                            <div class="col-12" t-if="errors">
                                <t t-foreach="errors" t-as="error">
                                    <div class="alert alert-danger" t-if="error" role="alert">
                                        <h4>
                                            <t t-esc="error[0]"/>
                                        </h4>
                                        <t t-esc="error[1]"/>
                                    </div>
                                </t>
                            </div>
                            <div class="col-12 col-xl-auto order-xl-2">
                                <t t-call="website_sale.cart_summary"/>
                            </div>
                            <div class="col-12 col-xl order-xl-1 oe_cart">
                                <div class="card">
                                    <div class="card-body" id="shipping_and_billing">
                                        <a class="float-right no-decoration" href="/shop/checkout">
                                            <i class="fa fa-edit"/>
                                            Edit
                                        </a>
                                        <t t-set="same_shipping"
                                           t-value="bool(order.partner_shipping_id==order.partner_id or only_services)"/>
                                        <div>
                                            <b>Faturamento <t t-if="same_shipping and not only_services">&amp;
                                                Entrega</t>:
                                            </b>
                                            <span t-esc="order.partner_id"
                                                  t-options="dict(widget='contact', fields=['address'], no_marker=True, separator=', ')"
                                                  class="address-inline"/>
                                        </div>
                                        <div t-if="not same_shipping and not only_services"
                                             groups="sale.group_delivery_invoice_address">
                                            <b>Entrega:</b>
                                            <span t-esc="order.partner_shipping_id"
                                                  t-options="dict(widget='contact', fields=['address'], no_marker=True, separator=', ')"
                                                  class="address-inline"/>
                                        </div>
                                    </div>
                                </div>

                                <div class="oe_structure clearfix mt-3" id="oe_structure_website_sale_payment_1"/>

                                <div id="payment_method" class="mt-3"
                                     t-if="(acquirers or tokens) and website_sale_order.amount_total">
                                    <h3 class="mb24">Pague com</h3>
                                    <t t-call="payment.payment_tokens_list">
                                        <t t-set="mode" t-value="'payment'"/>
                                        <t t-set="submit_txt">Pague agora</t>
                                        <t t-set="icon_right" t-value="1"/>
                                        <t t-set="icon_class" t-value="'fa-chevron-right'"/>
                                        <t t-set="submit_class" t-value="'btn btn-primary'"/>
                                        <t t-set="pms" t-value="tokens"/>
                                        <t t-set="form_action" t-value="'/shop/payment/token'"/>
                                        <t t-set="prepare_tx_url" t-value="'/shop/payment/transaction/'"/>
                                        <t t-set="partner_id" t-value="partner"/>

                                        <t t-set="back_button_icon_class" t-value="'fa-chevron-left'"/>
                                        <t t-set="back_button_txt">Voltar ao carrinho</t>
                                        <t t-set="back_button_class" t-value="'btn btn-secondary'"/>
                                        <t t-set="back_button_link" t-value="'/shop/cart'"/>
                                    </t>
                                </div>

                                <div t-if="not acquirers" class="mt-2">
                                    <a role="button" class="btn-link" groups="base.group_system"
                                       t-attf-href="/web#action=#{payment_action_id}">
                                        <i class="fa fa-arrow-right"/>
                                        Adicione metodo de pagamento
                                    </a>
                                </div>
                                <div class="js_payment mt-3" t-if="not website_sale_order.amount_total"
                                     id="payment_method">
                                    <form target="_self" action="/shop/payment/validate" method="post"
                                          class="float-right">
                                        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                                        <a role="button" class="btn btn-primary a-submit" href="#">
                                            <span t-if="order.amount_total &gt; 0">Pague agora
                                                <span class="fa fa-chevron-right"/>
                                            </span>
                                            <span t-if="order.amount_total == 0">Confirmar o pedido
                                                <span class="fa fa-chevron-right"/>
                                            </span>
                                        </a>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="oe_structure" id="oe_structure_website_sale_payment_2"/>
                </div>
            </t>


        </xpath>
    </template>

    <!--Shop - confirmation-->
    <template id="payment_confirmation_shop" inherit_id="website_sale.confirmation"
              name="confirmation Payment Loja">
        <xpath expr="//t[@t-call='website.layout']" position="replace">
            <t t-call="website.layout">
                <t t-set="additional_title">Loja - Confirmação</t>
                <div id="wrap">
                    <div class="container oe_website_sale py-2">
                        <h1>
                            <span>Pedido</span>
                            <em t-field="order.name"/>
                            <t t-if="order.state == 'sale'">
                                <span>Confirmado</span>
                            </t>
                        </h1>

                        <div class="row">
                            <div class="col-12 col-xl">
                                <div class="oe_cart">
                                    <t t-set="payment_tx_id" t-value="order.get_portal_last_transaction()"/>
                                    <t t-if="payment_tx_id.state == 'done'">
                                        <div class="thanks_msg">
                                            <h2>Obrigado pelo seu pedido.
                                                <a role="button" class="btn btn-primary d-none d-md-inline-block"
                                                   href="/shop/print" target="_blank" aria-label="Print" title="Print">
                                                    <i class="fa fa-print"/>
                                                    Imprimir
                                                </a>
                                            </h2>
                                        </div>
                                    </t>
                                    <t t-if="request.env['res.users']._get_signup_invitation_scope() == 'b2c' and request.website.is_public_user()">
                                        <p class="alert alert-info mt-3" role="status">
                                            <a role="button"
                                               t-att-href="order.partner_id.signup_prepare() and order.partner_id.with_context(relative_url=True).signup_url"
                                               class="btn btn-primary">Sign Up
                                            </a>
                                            to follow your order.
                                        </p>
                                    </t>
                                    <div class="oe_structure clearfix mt-3"
                                         id="oe_structure_website_sale_confirmation_1"/>
                                    <h3 class="text-left mt-3">
                                        <strong>Confirmaçao de pagamento:</strong>
                                    </h3>
                                    <table class="table">
                                        <tbody>
                                            <tr>
                                                <td colspan="2">
                                                    <t t-esc="order.get_portal_last_transaction().acquirer_id.name"/>
                                                </td>
                                                <td class="text-right" width="100">
                                                    <strong>Total:</strong>
                                                </td>
                                                <td class="text-right" width="100">
                                                    <strong t-field="order.amount_total"
                                                            t-options="{'widget': 'monetary', 'display_currency': order.pricelist_id.currency_id}"/>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <t t-call="website_sale.payment_confirmation_status"/>
                                    <div class="card mt-3">
                                        <div class="card-body">
                                            <t t-set="same_shipping"
                                               t-value="bool(order.partner_shipping_id==order.partner_id or only_services)"/>
                                            <div>
                                                <b>Faturamento <t t-if="same_shipping and not only_services">&amp;
                                                    Entrega</t>:
                                                </b>
                                                <span t-esc="order.partner_id"
                                                      t-options="dict(widget='contact', fields=['address'], no_marker=True, separator=', ')"
                                                      class="address-inline"/>
                                            </div>
                                            <div t-if="not same_shipping and not only_services"
                                                 groups="sale.group_delivery_invoice_address">
                                                <b>Entrega:</b>
                                                <span t-esc="order.partner_shipping_id"
                                                      t-options="dict(widget='contact', fields=['address'], no_marker=True, separator=', ')"
                                                      class="address-inline"/>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="oe_structure mt-3" id="oe_structure_website_sale_confirmation_2"/>
                                </div>
                            </div>
                            <div class="col-12 col-xl-auto">
                                <t t-set="website_sale_order" t-value="order"/>
                                <t t-call="website_sale.cart_summary">
                                    <t t-set="hide_coupon">1</t>
                                </t>
                            </div>
                        </div>
                    </div>
                    <div class="oe_structure" id="oe_structure_website_sale_confirmation_3"/>
                </div>
            </t>


        </xpath>
    </template>




</odoo>
